<div
  class="sidebar fixed top-0 h-screen bg-gradient-primary text-white transition-all duration-300 ease-in-out shadow-lg overflow-x-hidden flex flex-col"
  [class]="isCollapsed ? 'w-[64px] collapsed' : 'w-[256px]'"
  [class.left-0]="!isRTL"
  [class.right-0]="isRTL"
  [style.left]="!isRTL ? '0' : 'auto'"
  [style.right]="isRTL ? '0' : 'auto'"
>
  <!-- Sidebar Header -->
  <div
    class="flex items-center justify-between border-b border-white/10"
    [class]="isCollapsed ? 'p-3' : 'p-6'"
  >
    <!-- Logo Container - Only show when not collapsed -->
    <div class="flex items-center gap-3" *ngIf="!isCollapsed">
      <div
        class="w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center flex-shrink-0"
      >
        <i class="fas fa-graduation-cap text-lg text-white"></i>
      </div>
      <div>
        <h1 class="text-lg font-bold text-white m-0">{{ appName }}</h1>
        <p class="text-xs text-white/80 m-0">
          {{ "sidebar.digitalLibrary" | translate }}
        </p>
      </div>
    </div>

    <!-- Toggle Button - Always visible -->
    <button
      (click)="toggleSidebar()"
      class="bg-white/10 hover:bg-white/20 border-none text-white rounded-lg cursor-pointer transition-all duration-200 flex items-center justify-center hover:scale-105"
      [class]="isCollapsed ? 'p-2' : 'p-2'"
      [attr.aria-label]="
        isCollapsed
          ? ('sidebar.expandSidebar' | translate)
          : ('sidebar.collapseSidebar' | translate)
      "
    >
      <i class="fas fa-bars" [class]="isCollapsed ? 'text-sm' : 'text-lg'"></i>
    </button>
  </div>

  <!-- Main Navigation Menu -->
  <nav class="flex-1 overflow-y-auto" [class]="isCollapsed ? 'p-2' : 'p-4'">
    <!-- Dashboard -->
    <a
      [routerLink]="getDashboardRoute()"
      routerLinkActive="bg-white/20 text-white font-medium"
      class="nav-item flex items-center text-white/80 no-underline transition-all duration-200 rounded-lg mb-1 hover:bg-white/10 hover:text-white relative"
      [class.hover:translate-x-1]="!isRTL"
      [class.hover:-translate-x-1]="isRTL"
      [class]="isCollapsed ? 'py-3 px-2 justify-center' : 'py-3 px-4'"
      [title]="
        isCollapsed
          ? isAdmin()
            ? ('sidebar.adminDashboard' | translate)
            : ('sidebar.dashboard' | translate)
          : ''
      "
      (click)="onNavigationClick()"
    >
      <i
        class="fas fa-tachometer-alt text-lg"
        [class]="isCollapsed ? 'mr-0' : isRTL ? 'ml-3' : 'mr-3'"
      ></i>
      <span
        class="text-sm font-medium whitespace-nowrap overflow-hidden text-ellipsis"
        *ngIf="!isCollapsed"
      >
        {{ "sidebar.dashboard" | translate }}
      </span>
    </a>

    <!-- Admin Navigation -->
    <ng-container *ngIf="isAdmin()">
      <!-- Courses Group -->
      <div
        *ngIf="!isCollapsed"
        class="mt-4 mb-1 px-3 text-xs font-semibold uppercase tracking-wide text-white/60 select-none"
      >
        {{ "sidebar.courses.title" | translate }}
      </div>
      <a
        routerLink="/admin/courses"
        routerLinkActive="bg-white/20 text-white font-medium"
        class="nav-item flex items-center py-3 text-white/80 no-underline transition-all duration-200 rounded-lg mb-1 hover:bg-white/10 hover:text-white"
        [class.hover:translate-x-1]="!isRTL"
        [class.hover:-translate-x-1]="isRTL"
        [class]="isCollapsed ? 'py-3 px-2 justify-center' : 'py-3 px-4'"
        [class]="isCollapsed ? 'px-3' : 'px-6 ml-2'"
        [title]="
          isCollapsed ? ('sidebar.courses.manageCourses' | translate) : ''
        "
        (click)="onNavigationClick()"
      >
        <i
          class="fas fa-book text-lg"
          [class]="isCollapsed ? 'mr-0' : isRTL ? 'ml-3' : 'mr-3'"
        ></i>
        <span
          class="text-sm font-medium whitespace-nowrap overflow-hidden text-ellipsis"
          *ngIf="!isCollapsed"
          >{{ "sidebar.courses.manageCourses" | translate }}</span
        >
      </a>

      <!-- Learning Path - Hidden -->
      <!-- <a
        routerLink="/admin/learning-paths"
        routerLinkActive="bg-white/20 text-white font-medium"
        class="nav-item flex items-center py-3 text-white/80 no-underline transition-all duration-200 rounded-lg mb-1 hover:bg-white/10 hover:text-white hover:translate-x-1"
        [class]="isCollapsed ? 'px-3' : 'px-6 ml-2'"
        [title]="isCollapsed ? 'Learning Paths' : ''"
        (click)="onNavigationClick()"
      >
        <svg
          class="w-5 h-5 flex-shrink-0"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          [class]="isCollapsed ? 'mr-0' : 'mr-3'"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
          ></path>
        </svg>
        <span
          class="text-sm font-medium whitespace-nowrap overflow-hidden text-ellipsis"
          *ngIf="!isCollapsed"
          >Learning Paths</span
        >
      </a> -->

      <!-- Digital Library - Hidden -->
      <!-- <a
        routerLink="/admin/digital-library"
        routerLinkActive="bg-white/20 text-white font-medium"
        class="nav-item flex items-center py-3 text-white/80 no-underline transition-all duration-200 rounded-lg mb-1 hover:bg-white/10 hover:text-white hover:translate-x-1"
        [class]="isCollapsed ? 'px-3' : 'px-6 ml-2'"
        [title]="isCollapsed ? 'Digital Library' : ''"
        (click)="onNavigationClick()"
      >
        <svg
          class="w-5 h-5 flex-shrink-0"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          [class]="isCollapsed ? 'mr-0' : 'mr-3'"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"
          ></path>
        </svg>
        <span
          class="text-sm font-medium whitespace-nowrap overflow-hidden text-ellipsis"
          *ngIf="!isCollapsed"
          >Digital Library</span
        >
      </a> -->

      <!-- Suggested Courses -->
      <a
        routerLink="/admin/suggested-courses"
        routerLinkActive="bg-white/20 text-white font-medium"
        class="nav-item flex items-center py-3 text-white/80 no-underline transition-all duration-200 rounded-lg mb-1 hover:bg-white/10 hover:text-white"
        [class.hover:translate-x-1]="!isRTL"
        [class.hover:-translate-x-1]="isRTL"
        [class]="isCollapsed ? 'px-3' : 'px-6 ml-2'"
        [title]="
          isCollapsed ? ('sidebar.courses.suggestedCourses' | translate) : ''
        "
        (click)="onNavigationClick()"
      >
        <i
          class="fas fa-lightbulb text-lg"
          [class]="isCollapsed ? 'mr-0' : isRTL ? 'ml-3' : 'mr-3'"
        ></i>
        <span
          class="text-sm font-medium whitespace-nowrap overflow-hidden text-ellipsis"
          *ngIf="!isCollapsed"
          >{{ "sidebar.courses.suggestedCourses" | translate }}</span
        >
      </a>

      <!-- Course Requests -->
      <a
        routerLink="/admin/requests"
        routerLinkActive="bg-white/20 text-white font-medium"
        class="nav-item flex items-center py-3 text-white/80 no-underline transition-all duration-200 rounded-lg mb-1 hover:bg-white/10 hover:text-white"
        [class.hover:translate-x-1]="!isRTL"
        [class.hover:-translate-x-1]="isRTL"
        [class]="isCollapsed ? 'px-3' : 'px-6 ml-2'"
        [title]="isCollapsed ? ('sidebar.courses.requests' | translate) : ''"
        (click)="onNavigationClick()"
      >
        <i
          class="fas fa-clipboard-list text-lg"
          [class]="isCollapsed ? 'mr-0' : isRTL ? 'ml-3' : 'mr-3'"
        ></i>
        <span
          class="text-sm font-medium whitespace-nowrap overflow-hidden text-ellipsis"
          *ngIf="!isCollapsed"
          >{{ "sidebar.courses.requests" | translate }}</span
        >
      </a>

      <!-- Out Organization Group -->
      <div
        *ngIf="!isCollapsed"
        class="mt-4 mb-1 px-3 text-xs font-semibold uppercase tracking-wide text-white/60 select-none"
      >
        {{ "sidebar.organization.title" | translate }}
      </div>
      <div class="space-y-1">
        <!-- Users Management -->
        <a
          routerLink="/admin/users"
          routerLinkActive="bg-white/20 text-white font-medium"
          class="nav-item flex items-center py-3 px-4 text-white/80 no-underline transition-all duration-200 rounded-lg hover:bg-white/10 hover:text-white"
          [class.hover:translate-x-1]="!isRTL"
          [class.hover:-translate-x-1]="isRTL"
          [class]="isCollapsed ? 'px-3' : 'px-6 ml-2'"
          [title]="
            isCollapsed ? ('sidebar.organization.users' | translate) : ''
          "
          (click)="onNavigationClick()"
        >
          <i
            class="fas fa-users text-lg"
            [class]="isCollapsed ? 'mr-0' : isRTL ? 'ml-3' : 'mr-3'"
          ></i>
          <span
            class="text-sm font-medium whitespace-nowrap overflow-hidden text-ellipsis"
            *ngIf="!isCollapsed"
            >{{ "sidebar.organization.users" | translate }}</span
          >
        </a>

        <!-- Department -->
        <a
          routerLink="/admin/departments"
          routerLinkActive="bg-white/20 text-white font-medium"
          class="nav-item flex items-center py-3 px-4 text-white/80 no-underline transition-all duration-200 rounded-lg hover:bg-white/10 hover:text-white"
          [class.hover:translate-x-1]="!isRTL"
          [class.hover:-translate-x-1]="isRTL"
          [class]="isCollapsed ? 'px-3' : 'px-6 ml-2'"
          [title]="
            isCollapsed ? ('sidebar.organization.departments' | translate) : ''
          "
          (click)="onNavigationClick()"
        >
          <i
            class="fas fa-building text-lg"
            [class]="isCollapsed ? 'mr-0' : isRTL ? 'ml-3' : 'mr-3'"
          ></i>
          <span
            class="text-sm font-medium whitespace-nowrap overflow-hidden text-ellipsis"
            *ngIf="!isCollapsed"
            >{{ "sidebar.organization.departments" | translate }}</span
          >
        </a>

        <!-- Organizations -->
        <a
          routerLink="/admin/organizations"
          routerLinkActive="bg-white/20 text-white font-medium"
          class="nav-item flex items-center py-3 px-4 text-white/80 no-underline transition-all duration-200 rounded-lg hover:bg-white/10 hover:text-white"
          [class.hover:translate-x-1]="!isRTL"
          [class.hover:-translate-x-1]="isRTL"
          [class]="isCollapsed ? 'px-3' : 'px-6 ml-2'"
          [title]="
            isCollapsed
              ? ('sidebar.organization.organizations' | translate)
              : ''
          "
          (click)="onNavigationClick()"
        >
          <i
            class="fas fa-network-wired text-lg"
            [class]="isCollapsed ? 'mr-0' : isRTL ? 'ml-3' : 'mr-3'"
          ></i>
          <span
            class="text-sm font-medium whitespace-nowrap overflow-hidden text-ellipsis"
            *ngIf="!isCollapsed"
            >{{ "sidebar.organization.organizations" | translate }}</span
          >
        </a>
      </div>

      <!-- Out Institutions Group -->
      <div
        *ngIf="!isCollapsed"
        class="mt-4 mb-1 px-3 text-xs font-semibold uppercase tracking-wide text-white/60 select-none"
      >
        {{ "sidebar.institutions.title" | translate }}
      </div>
      <div class="space-y-1">
        <!-- Instructors Management -->
        <a
          routerLink="/admin/instructors"
          routerLinkActive="bg-white/20 text-white font-medium"
          class="nav-item flex items-center py-3 px-4 text-white/80 no-underline transition-all duration-200 rounded-lg hover:bg-white/10 hover:text-white"
          [class.hover:translate-x-1]="!isRTL"
          [class.hover:-translate-x-1]="isRTL"
          [class]="isCollapsed ? 'px-3' : 'px-6 ml-2'"
          [title]="
            isCollapsed ? ('sidebar.institutions.instructors' | translate) : ''
          "
          (click)="onNavigationClick()"
        >
          <i
            class="fas fa-chalkboard-teacher text-lg"
            [class]="isCollapsed ? 'mr-0' : isRTL ? 'ml-3' : 'mr-3'"
          ></i>
          <span
            class="text-sm font-medium whitespace-nowrap overflow-hidden text-ellipsis"
            *ngIf="!isCollapsed"
            >{{ "sidebar.institutions.instructors" | translate }}</span
          >
        </a>

        <!-- Institutions Management -->
        <a
          routerLink="/admin/institutions"
          routerLinkActive="bg-white/20 text-white font-medium"
          class="nav-item flex items-center py-3 px-4 text-white/80 no-underline transition-all duration-200 rounded-lg hover:bg-white/10 hover:text-white"
          [class.hover:translate-x-1]="!isRTL"
          [class.hover:-translate-x-1]="isRTL"
          [class]="isCollapsed ? 'px-3' : 'px-6 ml-2'"
          [title]="
            isCollapsed ? ('sidebar.institutions.institutions' | translate) : ''
          "
          (click)="onNavigationClick()"
        >
          <i
            class="fas fa-university text-lg"
            [class]="isCollapsed ? 'mr-0' : isRTL ? 'ml-3' : 'mr-3'"
          ></i>
          <span
            class="text-sm font-medium whitespace-nowrap overflow-hidden text-ellipsis"
            *ngIf="!isCollapsed"
            >{{ "sidebar.institutions.institutions" | translate }}</span
          >
        </a>
      </div>

      <!-- Roles & Permissions Group -->
      <div
        *ngIf="!isCollapsed"
        class="mt-4 mb-1 px-3 text-xs font-semibold uppercase tracking-wide text-white/60 select-none"
      >
        {{ "sidebar.rolesPermissions.title" | translate }}
      </div>
      <div class="space-y-1">
        <!-- Roles Management -->
        <a
          routerLink="/admin/roles"
          routerLinkActive="bg-white/20 text-white font-medium"
          class="nav-item flex items-center py-3 px-4 text-white/80 no-underline transition-all duration-200 rounded-lg hover:bg-white/10 hover:text-white"
          [class.hover:translate-x-1]="!isRTL"
          [class.hover:-translate-x-1]="isRTL"
          [class]="isCollapsed ? 'px-3' : 'px-6 ml-2'"
          [title]="
            isCollapsed ? ('sidebar.rolesPermissions.roles' | translate) : ''
          "
          (click)="onNavigationClick()"
        >
          <i
            class="fas fa-shield-alt text-lg"
            [class]="isCollapsed ? 'mr-0' : isRTL ? 'ml-3' : 'mr-3'"
          ></i>
          <span
            class="text-sm font-medium whitespace-nowrap overflow-hidden text-ellipsis"
            *ngIf="!isCollapsed"
            >{{ "sidebar.rolesPermissions.roles" | translate }}</span
          >
        </a>
      </div>
    </ng-container>

    <!-- Regular User Navigation -->
    <ng-container *ngIf="!isAdmin()">
      <!-- Courses -->
      <!-- <a
        routerLink="/courses"
        routerLinkActive="bg-white/20 text-white font-medium"
        class="nav-item flex items-center py-4 px-3 text-white/80 no-underline transition-all duration-200 rounded-lg mb-1 hover:bg-white/10 hover:text-white hover:translate-x-1"
        [title]="isCollapsed ? 'Courses' : ''"
        (click)="onNavigationClick()"
      >
        <svg
          class="w-5 h-5 flex-shrink-0"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          [class]="isCollapsed ? 'mr-0' : 'mr-3'"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"
          ></path>
        </svg>
        <span
          class="text-sm font-medium whitespace-nowrap overflow-hidden text-ellipsis"
          *ngIf="!isCollapsed"
          >Courses</span
        >
      </a> -->

      <!-- Digital Library -->
      <!-- <a
        routerLink="/digital-library"
        routerLinkActive="bg-white/20 text-white font-medium"
        class="nav-item flex items-center py-4 px-3 text-white/80 no-underline transition-all duration-200 rounded-lg mb-1 hover:bg-white/10 hover:text-white hover:translate-x-1"
        [title]="isCollapsed ? 'Digital Library' : ''"
        (click)="onNavigationClick()"
      >
        <svg
          class="w-5 h-5 flex-shrink-0"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          [class]="isCollapsed ? 'mr-0' : 'mr-3'"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"
          ></path>
        </svg>
        <span
          class="text-sm font-medium whitespace-nowrap overflow-hidden text-ellipsis"
          *ngIf="!isCollapsed"
          >Digital Library</span
        >
      </a> -->
    </ng-container>
  </nav>

  <!-- Bottom Section - User Related Items -->
  <div class="mt-auto border-t border-white/10 p-4">
    <!-- Settings -->
    <a
      routerLink="/settings"
      routerLinkActive="bg-white/20 text-white font-medium"
      class="nav-item flex items-center p-3 text-white/80 no-underline transition-all duration-200 rounded-lg mb-1 hover:bg-white/10 hover:text-white"
      [class.hover:translate-x-1]="!isRTL"
      [class.hover:-translate-x-1]="isRTL"
      [title]="isCollapsed ? ('sidebar.settings' | translate) : ''"
      *ngIf="isAdmin()"
      (click)="onNavigationClick()"
    >
      <i
        class="fas fa-cog text-lg"
        [class]="isCollapsed ? 'mr-0' : isRTL ? 'ml-3' : 'mr-3'"
      ></i>
      <span
        class="text-sm font-medium whitespace-nowrap overflow-hidden text-ellipsis"
        *ngIf="!isCollapsed"
        >{{ "sidebar.settings" | translate }}</span
      >
    </a>

    <!-- Profile -->
    <a
      routerLink="/profile"
      routerLinkActive="bg-white/20 text-white font-medium"
      class="nav-item flex items-center text-white/80 no-underline transition-all duration-200 rounded-lg mb-1 hover:bg-white/10 hover:text-white"
      [class.hover:translate-x-1]="!isRTL"
      [class.hover:-translate-x-1]="isRTL"
      [class]="isCollapsed ? 'py-3 px-2 justify-center' : 'py-3 px-4'"
      [title]="isCollapsed ? ('sidebar.profile' | translate) : ''"
      *ngIf="isAdmin()"
      (click)="onNavigationClick()"
    >
      <i
        class="fas fa-user text-lg"
        [class]="isCollapsed ? 'mr-0' : isRTL ? 'ml-3' : 'mr-3'"
      ></i>
      <span
        class="text-sm font-medium whitespace-nowrap overflow-hidden text-ellipsis"
        *ngIf="!isCollapsed"
        >{{ "sidebar.profile" | translate }}</span
      >
    </a>

    <!-- Logout -->
    <button
      (click)="logout()"
      class="nav-item flex items-center text-white/80 no-underline transition-all duration-200 rounded-lg mb-2 hover:bg-white/10 hover:text-white w-full text-left"
      [class.hover:translate-x-1]="!isRTL"
      [class.hover:-translate-x-1]="isRTL"
      [class]="isCollapsed ? 'py-3 px-2 justify-center' : 'py-3 px-4'"
      [title]="isCollapsed ? ('sidebar.logout' | translate) : ''"
    >
      <i
        class="fas fa-sign-out-alt text-lg"
        [class]="isCollapsed ? 'mr-0' : isRTL ? 'ml-3' : 'mr-3'"
      ></i>
      <span
        class="text-sm font-medium whitespace-nowrap overflow-hidden text-ellipsis"
        *ngIf="!isCollapsed"
        >{{ "sidebar.logout" | translate }}</span
      >
    </button>
  </div>
</div>

<!-- Custom Logout Confirmation Modal -->
<app-confirm-modal
  [isOpen]="showLogoutConfirm"
  [title]="'sidebar.confirmLogout.title' | translate"
  [message]="'sidebar.confirmLogout.message' | translate"
  [confirmText]="'sidebar.confirmLogout.confirmText' | translate"
  (confirm)="onLogoutConfirm()"
  (cancel)="onLogoutCancel()"
></app-confirm-modal>
