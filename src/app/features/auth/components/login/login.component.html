<div
  class="min-h-screen flex items-center justify-center p-4 sm:p-6 lg:p-8"
  [class.rtl]="isRTL"
  [attr.dir]="isRTL ? 'rtl' : 'ltr'"
>
  <div class="w-full max-w-7xl mx-auto">
    <div
      class="flex flex-col lg:flex-row bg-white rounded-2xl shadow-2xl overflow-hidden"
    >
      <!-- Left Section - Login Form -->
      <div
        class="relative flex-1 flex flex-col items-center justify-center p-6 sm:p-8 lg:p-12"
      >
        <div class="w-full max-w-md mx-auto">
          <!-- Logo Section -->
          <div class="flex flex-col items-center mb-8">
            <img
              src="assets/images/logos/OTC.png"
              [alt]="appConstants.APP_NAME + ' Logo'"
              class="h-24 sm:h-32 mb-6 transform hover:scale-105 transition-transform duration-300"
            />
            <h2
              class="text-2xl text-center sm:text-3xl font-bold text-[#13546e] mb-2 flex items-center"
            >
              {{
                "login.title" | translate : { appName: appConstants.APP_NAME }
              }}
            </h2>
          </div>

          <!-- Login Form -->
          <form
            [formGroup]="loginForm"
            (ngSubmit)="onLogin()"
            class="space-y-6"
          >
            <!-- Username Field -->
            <div class="space-y-2">
              <label
                for="username"
                class="block text-sm font-medium text-gray-700"
                [class.text-right]="isRTL"
                [class.text-left]="!isRTL"
                >{{ "login.form.civilNumber.label" | translate }}</label
              >
              <div class="relative">
                <span
                  class="absolute inset-y-0 flex items-center text-gray-400"
                  [class.right-0]="isRTL"
                  [class.left-0]="!isRTL"
                  [class.pr-3]="isRTL"
                  [class.pl-3]="!isRTL"
                >
                  <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path
                      fill-rule="evenodd"
                      d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"
                      clip-rule="evenodd"
                    ></path>
                  </svg>
                </span>
                <input
                  type="text"
                  id="civilNo"
                  formControlName="civilNo"
                  [ngClass]="{
                    'border-red-500 bg-red-50 focus:ring-red-500/30 focus:border-red-500':
                      hasError('civilNo'),
                    'border-green-500 bg-green-50 focus:ring-green-500/30 focus:border-green-500':
                      civilNoControl?.valid && civilNoControl?.touched,
                    'border-gray-200 bg-gray-50 focus:ring-[#13546e]/30 focus:border-[#13546e]':
                      !hasError('civilNo') &&
                      !(civilNoControl?.valid && civilNoControl?.touched)
                  }"
                  [class.pl-10]="!isRTL"
                  [class.pr-10]="isRTL"
                  class="w-full py-2.5 text-gray-700 border rounded-xl focus:outline-none focus:ring-2 transition-colors duration-200"
                  [placeholder]="
                    'login.form.civilNumber.placeholder' | translate
                  "
                />
                <div
                  *ngIf="hasError('civilNo')"
                  class="text-error text-xs mt-1.5 flex items-start"
                >
                  <svg
                    class="w-3 h-3 mr-1 mt-0.5"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                      clip-rule="evenodd"
                    ></path>
                  </svg>
                  <span>{{ getErrorMessage("civilNo") }}</span>
                </div>
              </div>
            </div>

            <!-- Password Field -->
            <div class="space-y-2">
              <label
                for="password"
                class="block text-sm font-medium text-gray-700"
                [class.text-right]="isRTL"
                [class.text-left]="!isRTL"
                >{{ "login.form.password.label" | translate }}</label
              >
              <div class="relative">
                <span
                  class="absolute inset-y-0 flex items-center text-gray-400"
                  [class.right-0]="isRTL"
                  [class.left-0]="!isRTL"
                  [class.pr-3]="isRTL"
                  [class.pl-3]="!isRTL"
                >
                  <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path
                      fill-rule="evenodd"
                      d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z"
                      clip-rule="evenodd"
                    ></path>
                  </svg>
                </span>
                <input
                  type="password"
                  id="password"
                  formControlName="password"
                  [ngClass]="{
                    'border-red-500 bg-red-50 focus:ring-red-500/30 focus:border-red-500':
                      hasError('password'),
                    'border-green-500 bg-green-50 focus:ring-green-500/30 focus:border-green-500':
                      passwordControl?.valid && passwordControl?.touched,
                    'border-gray-200 bg-gray-50 focus:ring-[#13546e]/30 focus:border-[#13546e]':
                      !hasError('password') &&
                      !(passwordControl?.valid && passwordControl?.touched)
                  }"
                  [class.pl-10]="!isRTL"
                  [class.pr-10]="isRTL"
                  class="w-full py-2.5 text-gray-700 border rounded-xl focus:outline-none focus:ring-2 transition-colors duration-200"
                  [placeholder]="'login.form.password.placeholder' | translate"
                />
                <div
                  *ngIf="hasError('password')"
                  class="text-error text-xs mt-1.5 flex items-start"
                >
                  <svg
                    class="w-3 h-3 mr-1 mt-0.5"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                      clip-rule="evenodd"
                    ></path>
                  </svg>
                  <span>{{ getErrorMessage("password") }}</span>
                </div>
              </div>
            </div>

            <!-- Remember Me & Forgot Password -->
            <div class="flex items-center justify-between" [class.flex-row-reverse]="isRTL">
              <div class="flex items-center" [class.flex-row-reverse]="isRTL">
                <input
                  type="checkbox"
                  id="remember-me"
                  formControlName="rememberMe"
                  class="w-4 h-4 border-gray-300 rounded focus:ring-[#13546e] checked:bg-[#13546e] checked:border-[#13546e]"
                />
                <label
                  for="remember-me"
                  class="text-sm text-gray-600"
                  [class.mr-2]="isRTL"
                  [class.ml-2]="!isRTL"
                  >{{ "login.form.rememberMe" | translate }}</label
                >
              </div>
            </div>

            <!-- Submit Button -->
            <button
              type="submit"
              [disabled]="loginForm.invalid && formSubmitted"
              [ngClass]="{
                'bg-gradient-to-r from-gray-200 to-gray-300 cursor-not-allowed transform-none hover:transform-none hover:shadow-none':
                  loginForm.invalid && formSubmitted,
                'bg-gradient-to-r from-[#13546e] to-[#28818f] hover:shadow-lg transform hover:-translate-y-0.5':
                  !(loginForm.invalid && formSubmitted)
              }"
              class="w-full py-3 px-4 text-white rounded-xl shadow-md hover:shadow-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-[#13546e]/30 flex justify-center items-center"
            >
              <span>{{ "login.form.signIn" | translate }}</span>
              <i class="fas fa-sign-in-alt" [class.mr-2]="isRTL" [class.ml-2]="!isRTL"></i>
            </button>

            <!-- Security Note -->
            <div class="text-xs text-neutral-500 mt-4">
              <p
                class="text-center mt-2 flex items-center justify-center gap-2"
              >
              Â© {{ currentYear }} <span class="text-blue-400 font-medium">{{ "FOOTER_ORGANIZATION" | translate }}</span> - {{ "FOOTER_RIGHTS" | translate }}
              </p>
            </div>
          </form>
        </div>
      </div>

      <!-- Right Section - Feature Highlights -->
      <div
        class="hidden lg:flex lg:w-1/2 bg-gradient-to-br from-[#13546e] via-[#28818f] to-[#13546e] p-8 lg:p-12"
        [class.rtl]="isRTL"
        [attr.dir]="isRTL ? 'rtl' : 'ltr'"
      >
        <div class="flex flex-col justify-center space-y-8 max-w-lg mx-auto">
          <div class="grid gap-6">
            <div class="space-y-4">
              <h3
                class="text-2xl sm:text-3xl font-bold text-white"
                [class.text-right]="isRTL"
              >
                {{
                  "login.features.title"
                    | translate : { appName: appConstants.APP_NAME }
                }}
              </h3>
              <p
                class="text-blue-100 text-sm sm:text-base"
                [class.text-right]="isRTL"
              >
                {{ "login.features.subtitle" | translate }}
              </p>
            </div>

            <!-- Feature 1 -->
            <div
              class="bg-white/10 p-4 rounded-xl backdrop-blur-sm"
              [class.text-right]="isRTL"
              [class.text-left]="!isRTL"
            >
              <h4 class="font-semibold text-white mb-2">
                {{ "login.features.courseLibrary.title" | translate }}
              </h4>
              <p class="text-blue-100 text-sm">
                {{ "login.features.courseLibrary.description" | translate }}
              </p>
            </div>

            <!-- Feature 2 -->
            <div
              class="bg-white/10 p-4 rounded-xl backdrop-blur-sm"
              [class.text-right]="isRTL"
              [class.text-left]="!isRTL"
            >
              <h4 class="font-semibold text-white mb-2">
                {{ "login.features.certifications.title" | translate }}
              </h4>
              <p class="text-primary-100 text-sm">
                {{ "login.features.certifications.description" | translate }}
              </p>
            </div>

            <!-- Feature 3 -->
            <div
              class="bg-white/10 p-4 rounded-xl backdrop-blur-sm"
              [class.text-right]="isRTL"
              [class.text-left]="!isRTL"
            >
              <h4 class="font-semibold text-white mb-2">
                {{ "login.features.collaborativeLearning.title" | translate }}
              </h4>
              <p class="text-primary-100 text-sm">
                {{
                  "login.features.collaborativeLearning.description" | translate
                }}
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- User Type Selection Modal -->
<app-user-type-modal
  [show]="showUserTypeModal"
  [loading]="userTypeModalLoading"
  (confirm)="onUserTypeConfirm($event)"
  (cancel)="onUserTypeCancel()"
></app-user-type-modal>
