<div
  class="min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4"
>
  <div class="max-w-md w-full">
    <!-- Loading State -->
    <div *ngIf="loading" class="text-center">
      <div class="bg-white rounded-2xl shadow-xl p-8">
        <div
          class="animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-6"
        ></div>
        <h2 class="text-2xl font-bold text-gray-900 mb-4">
          Processing Attendance
        </h2>
        <p class="text-gray-600">
          Please wait while we record your attendance...
        </p>
      </div>
    </div>

    <!-- Success State -->
    <div *ngIf="!loading && scanResult === 'success'" class="text-center">
      <div class="bg-white rounded-2xl shadow-xl p-8">
        <!-- Success Icon -->
        <div
          class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6"
        >
          <i class="fas fa-check-circle text-4xl text-green-600"></i>
        </div>

        <!-- Success Message -->
        <h2 class="text-2xl font-bold text-gray-900 mb-4">
          Attendance Recorded!
        </h2>
        <p class="text-gray-600 mb-6">
          Your attendance has been successfully recorded for this course.
        </p>

        <!-- Attendance Details -->
        <div class="bg-green-50 rounded-lg p-6 mb-6">
          <div class="space-y-3">
            <div class="flex items-center justify-between">
              <span class="text-sm font-medium text-gray-700">Course ID:</span>
              <span class="text-sm text-gray-900">{{ courseId }}</span>
            </div>
            <div class="flex items-center justify-between">
              <span class="text-sm font-medium text-gray-700">Date:</span>
              <span class="text-sm text-gray-900">{{
                getAttendanceDate()
              }}</span>
            </div>
            <div class="flex items-center justify-between">
              <span class="text-sm font-medium text-gray-700">Time:</span>
              <span class="text-sm text-gray-900">{{
                getAttendanceTime()
              }}</span>
            </div>
            <div class="flex items-center justify-between">
              <span class="text-sm font-medium text-gray-700">Status:</span>
              <span
                class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"
              >
                <i class="fas fa-check-circle mr-1"></i>
                Present
              </span>
            </div>
          </div>
        </div>

        <!-- Action Button -->
        <button
          (click)="goBack()"
          class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200"
        >
          <i class="fas fa-arrow-left mr-2"></i>
          Back to Courses
        </button>
      </div>
    </div>

    <!-- Error State -->
    <div *ngIf="!loading && scanResult === 'error'" class="text-center">
      <div class="bg-white rounded-2xl shadow-xl p-8">
        <!-- Error Icon -->
        <div
          class="w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6"
        >
          <i class="fas fa-exclamation-triangle text-4xl text-red-600"></i>
        </div>

        <!-- Error Message -->
        <h2 class="text-2xl font-bold text-gray-900 mb-4">Attendance Failed</h2>
        <p class="text-gray-600 mb-6">{{ errorMessage }}</p>

        <!-- Error Details -->
        <div class="bg-red-50 rounded-lg p-6 mb-6">
          <div class="space-y-3">
            <div class="flex items-center justify-between">
              <span class="text-sm font-medium text-gray-700">Course ID:</span>
              <span class="text-sm text-gray-900">{{ courseId }}</span>
            </div>
            <div class="flex items-center justify-between">
              <span class="text-sm font-medium text-gray-700">Token:</span>
              <span class="text-sm text-gray-900 font-mono"
                >{{ token.substring(0, 8) }}...</span
              >
            </div>
            <div class="flex items-center justify-between">
              <span class="text-sm font-medium text-gray-700">Status:</span>
              <span
                class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"
              >
                <i class="fas fa-times-circle mr-1"></i>
                Failed
              </span>
            </div>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="space-y-3">
          <button
            (click)="retry()"
            class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200"
          >
            <i class="fas fa-redo mr-2"></i>
            Try Again
          </button>
          <button
            (click)="goBack()"
            class="w-full bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-3 px-4 rounded-lg transition-colors duration-200"
          >
            <i class="fas fa-arrow-left mr-2"></i>
            Back to Courses
          </button>
        </div>

        <!-- Help Message -->
        <div class="mt-6 p-4 bg-yellow-50 rounded-lg">
          <div class="flex items-start">
            <i class="fas fa-info-circle text-yellow-600 mt-1 mr-3"></i>
            <div class="text-left">
              <p class="text-sm font-medium text-yellow-800 mb-1">Need Help?</p>
              <p class="text-xs text-yellow-700">
                If you continue to experience issues, please contact your team
                administrator for assistance.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
